<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
  
<mapper namespace="com.mypet.mappers.findboardMapper">
	<insert id="insert_findboard">
		insert into find_board(find_board_num, board_code, nickname, title, content, readcount, pet_type,
								missing_date, pet_name, pet_age, pet_gender,address, address2, result, 
								insert_date, delete_date, detail_address, reward)
		values (#{find_board_num},'f',#{nickname},"title",
				#{content},#{readcount},#{pet_type},#{missing_date},
				#{pet_name},#{pet_age},#{pet_gender},#{address},#{address2},
				#{result},#{insert_date},#{delete_date},#{detail_address},#{reward})
	</insert>
	
	<select id="getMaxNum" resultType="java.lang.Integer">
		select max(find_board_num) from find_board 
	</select>
	
	<select id="getfindBoard" resultType="com.mypet.domain.FindboardDTO">
		select * from find_board where find_board_num=#{find_board_num}
	</select>
	
	<!-- 댓글조회 -->
	<select id="readComment" resultType="com.mypet.domain.FindcommentDTO">
		SELECT * FROM find_comment
		where find_board_num = #{find_board_num}
	</select>
	

	<!-- 게시글 가져오기(모달용) -->
	<select id="bringfindBoard" resultType="com.mypet.domain.FindboardDTO">
		SELECT * FROM find_board
	</select>
	
	<select id="getfindBoardList" resultType="com.mypet.domain.FindboardDTO">
		select * from find_board order by find_board_num desc limit #{startRow},#{pageSize}
	</select>
	
	<select id="getfindMissBoardList" resultType="com.mypet.domain.FindboardDTO">
		select * from find_board where result = "1" order by find_board_num desc limit #{startRow},#{pageSize}
	</select>
	
		<select id="getfindBoardCount" resultType="java.lang.Integer">
		select count(*) from find_board
	</select>
	
	<select id="getfindMissBoardCount" resultType="java.lang.Integer">
		select count(*) from find_board where result="1"
	</select>

	<select id="getProvinceList" resultType="Hashmap">
		select distinct address1 from address
	</select>
	
	<select id="getCityList" resultType="Hashmap">
		select distinct address2 from address where address1=#{province}
	</select>

	<select id="getTownList" parameterType="String" resultType="Hashmap">
		select distinct address3 from address where address1=#{province} and address2=#{city}
	</select>


</mapper>